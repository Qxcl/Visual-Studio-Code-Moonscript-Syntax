'use strict';


const fs = require('fs'),
	  Args = require('args-js');


module.exports.readdirRecursiveSync = function(path) {
	let args = Args([
		{path:Args.STRING|Args.Required},
		{excludeFoldersFromResult:Args.BOOL|Args.Optional, _default:true}
	], arguments);

	let folders = [args.path];
	let folder, results = [];
	while((folder = folders.shift()) !== undefined) {
		for(let child of fs.readdirSync(folder)) {
			let path = `${folder}/${child}`;
			let stats = fs.lstatSync(path);
			if(stats.isDirectory()) {
				folders.push(path);
				if(!args.excludeFoldersFromResult) {
					results.push(`${path}/`);
				}
			}
			else {
				results.push(path);
			}
		}
	}

	return results;
}